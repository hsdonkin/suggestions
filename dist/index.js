var t,e,i,s,n,r;t={},e={},e=function(){for(var t={},e=0;e<arguments.length;e++){var s=arguments[e];for(var n in s)i.call(s,n)&&(t[n]=s[n])}return t},i=Object.prototype.hasOwnProperty,s={},s=n={},n.simpleFilter=function(t,e){return e.filter(function(e){return n.test(t,e)})},n.test=function(t,e){return null!==n.match(t,e)},n.match=function(t,e,i){i=i||{};var s,n=0,r=[],h=e.length,a=0,l=0,o=i.pre||"",d=i.post||"",u=i.caseSensitive&&e||e.toLowerCase();t=i.caseSensitive&&t||t.toLowerCase();for(var c=0;c<h;c++)s=e[c],u[c]===t[n]?(s=o+s+d,n+=1,l+=1+l):l=0,a+=l,r[r.length]=s;return n===t.length?(a=u===t?1/0:a,{rendered:r.join(""),score:a}):null},n.filter=function(t,e,i){return e&&0!==e.length?"string"!=typeof t?e:(i=i||{},e.reduce(function(e,s,r,h){var a=s;i.extract&&(a=i.extract(s));var l=n.match(t,a,i);return null!=l&&(e[e.length]={string:l.rendered,score:l.score,index:r,original:s}),e},[]).sort(function(t,e){return e.score-t.score||t.index-e.index})):[]},r={},r=class{constructor(t){this.component=t,this.id="suggestions-"+Math.random().toString(36).substr(2,16),this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.element.id=this.id,this.element.setAttribute("role","listbox"),this.element.setAttribute("aria-label","Results"),this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling)}show(){this.element.style.display="block"}hide(){this.element.style.display="none"}add(t){this.items.push(t)}clear(){this.items=[],this.active=0}isEmpty(){return!this.items.length}isVisible(){return"block"===this.element.style.display}draw(){if(this.element.innerHTML="",0===this.items.length){this.hide();return}for(let t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()}drawItem(t,e){let i=document.createElement("li"),s=document.createElement("a"),n=this.id+"-"+this.items.indexOf(t);i.setAttribute("id",n),i.setAttribute("role","option"),e&&(this.component.el.setAttribute("aria-activedescendant",n),i.className+=" active",i.setAttribute("aria-selected","true")),s.innerHTML=t.string,s.setAttribute("aria-label",s.textContent),i.appendChild(s),this.element.appendChild(i),i.addEventListener("mousedown",()=>{this.selectingListItem=!0}),i.addEventListener("mouseup",()=>{this.handleMouseUp(t)})}handleMouseUp(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()}move(t){this.active=t,this.draw()}previous(){this.move(0===this.active?this.items.length-1:this.active-1)}next(){this.move(this.active===this.items.length-1?0:this.active+1)}drawError(t){let e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()}},t=class{constructor(t,i,s){s=s||{},this.options=e({minLength:2,limit:5,filter:!0,hideOnBlur:!0},s),this.el=t,this.data=i||[],this.list=new r(this),this.el.setAttribute("role","combobox"),this.el.setAttribute("aria-autocomplete","list"),this.el.setAttribute("aria-controls",this.list.id),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(t){this.handleKeyUp(t.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(t){this.handleKeyDown(t)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(t){this.handlePaste(t)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this)}handleKeyUp=function(t){40!==t&&38!==t&&27!==t&&13!==t&&9!==t&&this.handleInputChange(this.el.value)};handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}};handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(t.target.value)},100)}};handleInputChange=function(t){if(this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}).bind(this))};handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};update=function(t){this.data=t,this.handleKeyUp()};clear=function(){this.data=[],this.list.clear()};normalize=function(t){return t=t.toLowerCase()};match=function(t,e){return t.indexOf(e)>-1};value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:(function(t){return this.getItemValue(t)}).bind(this)};t(this.options.filter?s.filter(this.query,this.data,e).map((function(t){return{original:t.original,string:this.render(t.original,t.string)}}).bind(this)):this.data.map((function(t){var e=this.render(t);return{original:t,string:e}}).bind(this)))};getItemValue=function(t){return t};render=function(t,e){if(e)return e;for(var i=t.original?this.getItemValue(t.original):this.getItemValue(t),s=this.normalize(i),n=s.lastIndexOf(this.query);n>-1;){var r=n+this.query.length;i=i.slice(0,n)+"<strong>"+i.slice(n,r)+"</strong>"+i.slice(r),n=s.slice(0,n).lastIndexOf(this.query)}return i};renderError=function(t){this.list.drawError(t)}},"undefined"!=typeof window&&(window.Suggestions=t);
//# sourceMappingURL=index.js.map
